<script>
    document.addEventListener("DOMContentLoaded", function () {
    document.querySelectorAll(".ajout-favoris-btn").forEach(button => {
        button.addEventListener("click", function () {
            let UIC = this.getAttribute("data-uic");
            console.log("UIC récupéré :", UIC); // Vérifier que l'UIC est bien récupéré

            fetch("/ajouter-favori", {  // Change l'URL pour une route distincte
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ UIC: UIC })
            })
            .then(response => response.json())
            .then(data => {
                console.log("Réponse Flask :", data); // Vérifier la réponse de Flask
                if (data.status === "success") {
                    alert("Gare ajoutée aux favoris !");
                } else if (data.status === "exists") {
                    alert("Cette gare est déjà dans vos favoris.");
                } else {
                    alert("Erreur : " + data.message);
                }
            })
            .catch(error => console.error("Erreur :", error));
        });
    });
});
    </script>
    